# wave-ver2.0 🎮

## 🚀 지금 바로 플레이하기!
**👉 [게임 바로가기 (Vercel)](https://wave-ver2-0.vercel.app/) 👈**

## 게임 소개
**wave-ver2.0**은 빠른 반응속도와 전략적 스킬 사용이 핵심인 **RPG 요소가 추가된** 몬스터 피하기 게임입니다.

- 플레이어(파란색 사각형)를 조작하여 빨간 몬스터들을 피하세요
- 몬스터는 화면 가장자리에서 등장해 플레이어를 향해 돌진합니다
- 몬스터와 충돌하면 게임 오버, 화면 밖으로 나가면 피하기 성공!
- **Wave 1부터 5개의 몬스터**가 등장하여 지루함 없는 즉시 액션!
- 웨이브가 올라갈수록 몬스터 수와 속도가 계속 증가합니다
- **🪙 코인 시스템**: 몬스터를 피할 때마다 코인 획득!
- **🏆 최고 기록**: localStorage 및 클라우드에 저장되는 개인 기록 시스템
- **🔐 Google OAuth**: 클라우드 저장 및 전체 랭킹 참여
- **🌐 실시간 랭킹**: 전 세계 플레이어와 경쟁
- **🎯 도전과제**: 플레이 통계 추적 및 다양한 업적 시스템

## 🎯 조작법

### 기본 이동
- **방향키 (←, →, ↑, ↓)** 또는 **WASD** 키로 이동
- 게임 오버 시 **R** 키로 재시작

### 🔥 스킬 시스템 (HJKL)
| 키 | 스킬 | 효과 | 기본 쿨다운 | 최대 레벨 |
|---|---|---|---|---|
| **H** | 대시 ⚡ | 현재 이동 방향으로 순간이동 | 3초 | 20 |
| **J** | 실드 🛡️ | 3초간 무적 상태 (청록색 원형 표시) | 10초 | 20 |
| **K** | 슬로우 🐌 | 5초간 모든 몬스터 속도 30% 감소 | 15초 | 20 |
| **L** | 스톱 ⏸️ | 모든 몬스터 3초간 정지 | 60초 | 20 |

### 🎮 UI 탭 전환
- **1키**: 게임 화면 (기본)
- **2키**: 상점 화면 🛒
- **3키**: 성장 화면 📈
- **4키**: 도전과제 화면 🎯
- **5키**: 랭킹 화면 🏆

## 🆕 클라우드 기능

### 🔐 Google OAuth 인증
- **Google 로그인**: 계정 연동으로 클라우드 기능 활성화
- **🔄 완전한 동기화**: 스킬 보유현황, 업그레이드 레벨, 도전과제 진행상황, 랭킹 현황 모든 데이터 동기화
- **자동 동기화**: 로그인 시 로컬 ↔ 클라우드 데이터 자동 병합
- **크로스 디바이스**: 어떤 기기에서든 동일한 게임 진행상황 유지

### 🏆 실시간 랭킹 시스템
- **전체 랭킹**: 전 세계 플레이어들과의 실시간 순위 경쟁
- **개인 최고 기록**: 본인의 최고 점수와 전체 순위 확인
- **자동 등록**: 게임 종료 시 자동으로 점수가 랭킹에 등록
- **순위 표시**: 1~3위는 특별한 메달 🥇🥈🥉 표시

### ☁️ 클라우드 저장
- **실시간 동기화**: 모든 게임 데이터가 실시간으로 클라우드에 저장
- **완전한 백업**: 스킬 보유현황, 업그레이드 레벨, 도전과제 진행상황, 플레이 통계 모든 데이터 보호
- **병합 시스템**: 로컬과 클라우드 데이터 중 최고값으로 자동 병합
- **🔄 수동 동기화**: 게임 내 "동기화" 버튼으로 언제든 수동 동기화 가능

## 🎯 도전과제 시스템 (4키)

### 📊 플레이 통계 추적
- **게임 플레이**: 총 게임 수, 플레이 시간, 세션 수
- **생존 기록**: 최고 웨이브, 총 몬스터 처치 수, 최장 생존 시간
- **경제 활동**: 총 코인 획득, 상점 이용 횟수, 업그레이드 구매 횟수
- **스킬 사용**: 각 스킬별 사용 횟수 및 효과 통계

### 🏆 다양한 업적
- **생존 마스터**: 특정 웨이브까지 생존
- **경제 거물**: 대량의 코인 획득
- **스킬 마에스트로**: 스킬 사용 횟수 달성
- **완벽주의자**: 모든 스킬 해제 및 최대 레벨 달성

### 💾 클라우드 동기화
- **실시간 저장**: 모든 통계와 업적 진행상황 자동 저장
- **기기 간 동기화**: 어떤 기기에서든 동일한 도전과제 진행상황 유지

## 🎲 RPG 시스템

### 💰 코인 시스템
- **기본 획득**: 몬스터 1마리 피할 때마다 +1 코인
- **보너스**: 10마리마다 +2 추가 코인
- **영구 저장**: localStorage 및 클라우드를 통한 데이터 보존

### 🛒 상점 시스템 (2키)
- **스킬 뽑기**: 300코인으로 J/K/L 스킬 중 랜덤 획득
- **기본 제공**: H(대시) 스킬만 처음부터 해제
- **중복 방지**: 이미 보유한 스킬은 제외
- **화려한 애니메이션**: 2초간 골드 색상 축하 효과

### 📈 성장 시스템 (3키)
- **최대 레벨**: 각 스킬 20레벨까지 업그레이드 가능
- **복잡한 비용**: 지수 + 제곱 + 페널티 시스템으로 고난이도 성장
- **효과 향상**: 레벨업 시 쿨다운 감소, 지속시간/거리 증가

#### 업그레이드 비용 공식
```
비용 = 기본비용 × (1.8^레벨 + 레벨² × 0.5 + 레벨 × 2) × 페널티
- 10레벨 이후: 1.3^(레벨-9) 추가 페널티
- 15레벨 이후: 1.5^(레벨-14) 극한 페널티
```

#### 스킬별 기본 비용
| 스킬 | 기본 비용 | 1→2레벨 | 1→10레벨(예상) | 1→20레벨(예상) |
|---|---|---|---|---|
| **H-대시** | 8코인 | 8코인 | ~1,600코인 | ~40,000코인 |
| **J-실드** | 15코인 | 15코인 | ~3,000코인 | ~75,000코인 |
| **K-슬로우** | 25코인 | 25코인 | ~5,000코인 | ~125,000코인 |
| **L-스톱** | 40코인 | 40코인 | ~8,000코인 | ~200,000코인 |

### 🏆 랭킹 시스템 (5키)
- **실시간 표시**: 상위 50명의 플레이어 랭킹 실시간 조회
- **개인 기록**: 본인의 최고 점수와 전체 순위 확인
- **자동 갱신**: 새로운 기록 달성 시 실시간 업데이트
- **순위 표시**: 1위🥇, 2위🥈, 3위🥉, 상위 10위까지 특별 표시

## 🎮 게임 특징

### 강화된 게임 밸런스
- **Wave 1**: 몬스터 5개, 속도 3.2 (기존 Wave 5 수준)
- **빠른 진행**: 지루한 초반 웨이브 제거
- **스킬 중심**: 전략적 스킬 사용이 생존의 핵심
- **장기 플레이**: RPG 요소로 인한 높은 재플레이 가치
- **경쟁 요소**: 실시간 랭킹으로 동기부여 증대

### 시각적 피드백
- **실드 활성화**: 플레이어 주변에 청록색 원형 실드 표시
- **슬로우 효과**: 몬스터 색상이 연한 빨간색으로 변경
- **스톱 효과**: 몬스터 색상이 회색으로 변경되며 완전 정지
- **스킬 상태**: 화면 하단에 간결한 이모지 기반 상태 표시
- **뽑기 애니메이션**: 화려한 골드 색상 축하 효과
- **랭킹 시각화**: 순위별 색상 구분과 개인 기록 강조

### 💡 게임 팁

#### 🎯 기본 생존 전략
1. **초반 생존**: Wave 1부터 5개 몬스터가 나오므로 즉시 스킬 활용
2. **대시 활용**: 위급 상황에서 H키로 빠른 탈출
3. **실드 타이밍**: 몬스터에 둘러싸였을 때 J키로 무적 상태 활용
4. **슬로우 전략**: 몬스터가 많을 때 K키로 시간 벌기
5. **스톱 활용**: L키로 3초간 몬스터 정지시켜 위기 상황 돌파

#### 💰 RPG 진행 전략
1. **코인 축적**: 초반에는 H-대시만으로 최대한 오래 버티기
2. **첫 번째 스킬**: 300코인 모아서 J/K/L 중 하나 뽑기
3. **업그레이드 vs 뽑기**: 추가 스킬 vs 기존 스킬 강화 선택
4. **장기 목표**: 모든 스킬 해제 후 20레벨 만렙 도전
5. **Google 로그인**: 클라우드 저장과 랭킹 참여로 동기부여 증대

#### 🏆 랭킹 전략
1. **로그인 필수**: Google 계정으로 로그인하여 랭킹 참여
2. **꾸준한 플레이**: 매일 조금씩 플레이하여 스킬 향상
3. **최적화**: 스킬 조합을 실험하여 개인 최적화 전략 개발
4. **경쟁 의식**: 친구들과 함께 플레이하여 순위 경쟁
5. **기록 갱신**: 실시간 랭킹을 보며 목표 설정

#### 🎯 도전과제 전략
1. **통계 확인**: 4키로 현재 플레이 통계 및 업적 진행상황 확인
2. **목표 설정**: 달성 가능한 업적부터 차근차근 도전
3. **다양한 플레이**: 여러 플레이 스타일로 다양한 업적 달성
4. **장기 계획**: 완벽주의자 업적을 위한 장기적 성장 계획

## 🛠️ 개발 정보

### 📁 프로젝트 구조 (최신 클라우드 ver.)
```
wave-ver2.0/
├── index.html                  # 메인 HTML 파일
├── css/
│   └── styles.css              # 스타일시트 (대폭 업데이트)
├── js/
│   ├── game.js                 # 메인 게임 로직 & 루프
│   ├── player.js               # 플레이어 관련 기능
│   ├── monster.js              # 몬스터 시스템
│   ├── skills.js               # HJKL 스킬 시스템
│   ├── input.js                # 키보드 입력 처리
│   ├── render.js               # 렌더링 & UI
│   ├── economy.js              # 코인 & 최고기록 시스템
│   ├── shop.js                 # 상점 & 뽑기 시스템
│   ├── upgrade.js              # 스킬 업그레이드 시스템
│   ├── ui.js                   # 탭 시스템 & UI 관리
│   ├── utils.js                # 유틸리티 & 상수
│   ├── supabase.js             # 🆕 Supabase 클라이언트
│   ├── auth.js                 # 🆕 Google OAuth 인증
│   ├── ranking.js              # 🆕 실시간 랭킹 시스템
│   └── achievements.js         # 🆕 도전과제 & 통계 시스템
├── supabase-setup.sql          # 🆕 데이터베이스 스키마
├── supabase-setup-complete.sql # 🆕 완전한 스키마 (안전 버전)
├── supabase-policy-fix.sql     # 🆕 정책 충돌 해결 스크립트
├── package.json                # 🆕 프로젝트 의존성
├── SETUP-GUIDE.md              # 🆕 설정 가이드
└── README.md
```

### 최신 업데이트 (완전한 클라우드 동기화 ver.)
- ✅ **Google OAuth 인증**: 안전한 계정 연동 시스템
- ✅ **Supabase 연동**: PostgreSQL 기반 실시간 데이터베이스
- ✅ **실시간 랭킹**: 전 세계 플레이어와의 경쟁 시스템
- ✅ **🆕 도전과제 시스템**: 플레이 통계 추적 및 업적 시스템
- ✅ **🆕 완전한 클라우드 동기화**: 스킬 보유현황, 업그레이드 레벨, 도전과제 진행상황, 랭킹 현황 모든 데이터 동기화
- ✅ **크로스 플랫폼**: 어떤 기기에서든 동일한 게임 진행
- ✅ **Vercel 배포**: 글로벌 CDN을 통한 빠른 접속
- ✅ **반응형 UI**: 모바일과 데스크톱 모두 지원
- ✅ **실시간 업데이트**: 즉시 반영되는 랭킹과 기록

### 기술 스택
- **Frontend**: HTML5 Canvas, JavaScript ES6+, CSS3
- **Backend**: Supabase (PostgreSQL, Real-time, Auth)
- **Authentication**: Google OAuth 2.0
- **Deployment**: Vercel (Global CDN)
- **Storage**: localStorage + Supabase Cloud Storage
- **Database**: PostgreSQL with Row Level Security (RLS)

## 📦 로컬 실행 방법

### 방법 1: HTTP 서버 실행 (권장)
**ES6 모듈을 사용하므로 HTTP 서버가 필요합니다.**

#### Python 사용:
```bash
# 저장소 클론
git clone https://github.com/Kevin-innovation/wave-ver2.0.git
cd wave-ver2.0

# HTTP 서버 실행
python3 -m http.server 8080

# 브라우저에서 접속
# http://localhost:8080
```

#### Node.js 사용:
```bash
# npx serve 사용
npx serve .

# 또는 http-server 사용
npx http-server .
```

### 방법 2: VS Code Live Server
1. VS Code에서 프로젝트 폴더 열기
2. Live Server 확장 프로그램 설치
3. index.html에서 "Go Live" 클릭

### ⚠️ 주의사항
- **직접 파일 열기 불가**: `file://` 프로토콜로는 ES6 모듈 import가 차단됩니다
- **HTTP 서버 필수**: 위의 방법 중 하나를 사용해야 게임이 정상 작동합니다
- **인터넷 연결**: 클라우드 기능 사용 시 인터넷 연결 필요

## 🔧 클라우드 기능 설정

### Supabase + Vercel 연동
클라우드 기능을 사용하려면 추가 설정이 필요합니다:

1. **Supabase 프로젝트 생성**
2. **Google OAuth 설정**
3. **데이터베이스 스키마 생성**
4. **Vercel 배포 설정**

자세한 설정 방법은 [`SETUP-GUIDE.md`](./SETUP-GUIDE.md)를 참조하세요.

## 🎓 교육적 가치
이 프로젝트는 다음과 같은 웹 개발 개념들을 학습할 수 있습니다:

- **HTML5 Canvas API**: 2D 그래픽 렌더링
- **JavaScript ES6+ 모듈**: import/export, 모던 JavaScript
- **게임 루프**: requestAnimationFrame을 활용한 60FPS 게임
- **상태 관리**: 복잡한 게임 상태와 UI 상태 관리
- **로컬 스토리지**: 브라우저 데이터 영구 저장
- **이벤트 처리**: 키보드/마우스 입력 처리
- **수학적 계산**: 벡터, 충돌 검사, 정규화
- **코드 아키텍처**: 모듈화, 관심사 분리
- **OAuth 인증**: Google OAuth 2.0 구현
- **데이터베이스**: PostgreSQL과 Supabase 연동
- **실시간 통신**: WebSocket 기반 실시간 업데이트
- **클라우드 배포**: Vercel을 통한 현대적 배포
- **🆕 통계 시스템**: 플레이 데이터 수집 및 분석
- **🆕 업적 시스템**: 진행률 추적 및 보상 시스템

## 🤝 기여하기
- 버그 리포트나 기능 제안은 [Issues](https://github.com/Kevin-innovation/wave-ver2.0/issues)에 남겨주세요
- Pull Request는 언제든 환영합니다!

---

**© 2025 by DLAB Kevin**  
*with ❤️ from Seoul, South Korea* 